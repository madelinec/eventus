
<!-- PLAYING WITH NAV BAR CLASSES AND SUCH, THIS SHOULD BE ITS OWN CLASS OR SOMETHING -->


<nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <h1> eventus </h1>
      <p class = "lead"> see what's happening in your neighboorhood.</p>
  </div>
</nav>
<style> 

.lead{
  line-height: 50%%
}


h1 {

  
  font-size: 300%;
  color: #A901DB;
  letter-spacing: 9px;
  line-height: 50%;
  font-family: 'Arvo', serif;
  } 

  </style>

<link href='http://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>


<nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">current time: <%= Time.now.strftime("%I:%M%p") %></a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li class="divider"></li>
            <li><a href="#">Separated link</a></li>
            <li class="divider"></li>
            <li><a href="#">One more separated link</a></li>
          </ul>
        </li>
      </ul>

      <ul class="nav navbar-nav navbar-right">
              <form class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input id="search-bar" type="text" class="form-control" placeholder="Search">
        </div>
        <button id="search-btn" type="submit" class="btn btn-default">Submit</button>
      </form>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>


<!-- END OF NAVBAR PLAYTIME-->





<html>
<head>

<!-- GOOG MAP -->
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBx9-z6p_I0bOLTADMVsDRxY21qD0y3cIw">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(42.3581, -71.0636),
          zoom: 10
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
      }
      google.maps.event.addDomListener(window, 'load', initialize);


$(document).ready(function() {
  $('.feedEntry-event').hover(function() {
    console.log($(this).text());
  })

});

function initialize() {

  var entries = <%= @entries.to_json.html_safe %>;
  var event_details = <%= @event_details.to_json.html_safe %>;
  var locations = <%= @locations.to_json.html_safe %>;
  var summaries = <%= @event_summaries.to_json.html_safe %>;
  //console.log(event_details);
  //console.log(locations);  

  var myLatlng = new google.maps.LatLng(42.3581, -71.0636);
  var mapOptions = {
    center: new google.maps.LatLng(42.3581, -71.0636),
    zoom: 12
  };

  var map = new google.maps.Map(document.getElementById("map-canvas"),
    mapOptions);

  for (var i=0; i<locations.length; i++) {
    var latLng = new google.maps.LatLng(locations[i]['lat'], locations[i]['lng']);
    
    var marker = new google.maps.Marker({
      position: latLng,
      map: map,
      title: locations[i]['title']
    });

    // need to wrap listener in closure to get each marker in loop
    (function(marker) {
      google.maps.event.addDomListener(marker, 'click', function() {
        var title = marker.getTitle();
        var summary = summaries[title];
        $("#summary-content").html(summary);
        $("#summary-title").html(title);
      });
    })(marker);
  }

}

/*
var display_summary = function(marker) {
  var title = marker.getTitle();
  var summary = marker[title];
  $("#summary-content").html(summary);
  $("#summary-title").html(title);
}
*/

google.maps.event.addDomListener(window, 'load', initialize);


var search = $('#search-bar');

$('#search-btn').click(function() {
  log_search()
})

var log_search = function() {
  search_term = search.val();
  console.log("new search: ", search_term);
}

var set_map_center = function(address) {
  // convert address to lat-lng
  // set map center to lat-lng
}
    </script>


 
  <style> 

  #sidebar-wrapper {
  margin-right: -170px;
  right: 200px;
  width: 20%;
  margin-left: 10%; 
  background: #f5f5f5;
  position: absolute;
  height: 100%;
  border-style: ridge;
  border-width: 10px;
  overflow-y: auto;
  z-index: 1000;
  transition: all 0.4s ease 0s;
}

.sidebar-nav {
  position: absolute;
  top: 0;
  width: 250px;
  margin-right: 5%;
  padding: 5px;
}

 /*@media (max-width:767px) {

    #wrapper {
      padding-right: 10;
    }

    #sidebar-wrapper {
      right: 0;
    }

    #wrapper.active {
      position: relative;
      right: 25%;
    }

    #wrapper.active #sidebar-wrapper {
      right: 250px;
      width: 250px;
      transition: all 0.4s ease 0s;
    } */

}
</style>
 </head>

  <body>

    <div id="wrapper">
    <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
          <li>
            <h3 id="summary-title" class="lead"></h3>
            <p id="summary-content"></p>
          </li>
          <li><p></p><p></p></li>
          <li>
           <div id="recent_events">
                  <h3 class = "lead"> upcoming events</h3>
                      <ul>
      <% for entry in @entries %>
        <li class="feedEntry-event" id="<%=entry.id%>"><%= link_to h(entry.title), entry.link %></li>
      <% end %>
    </ul>
               </div>
             </li>
        </ul>
    </div>
    </div>


    <div id="map-canvas" style="width: 77%; height: 100%" ></div>

  </body>
</html>
